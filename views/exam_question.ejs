<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Exam</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/css/exam_page.css" />
  </head>
  <body>
    <div class="container mt-5">
      <div class="d-flex justify-content-center row">
        <div class="overflow-hidden col-md-10 col-lg-10 border">
          <h1 class="m-1"><%= exam[0].exam_name %></h1>
          <h2 id="category-title"></h2>
          <div id="category-buttons">
            <a id="1" onclick="category_changer(this)">Maths</a>
            <a id="2" onclick="category_changer(this)">History</a>
            <%# for(let i = 0;i<2;i++) {%>
            <!-- <a id="<%#=category[i].category_name%>" onclick="category_changer(this)"><%#= category[i].category_name  %>1</a> -->
            <!-- <a id="2" onclick="category_changer(this)">Category 2</a> -->
            <%# } %>
          </div>
          <div class="bg-white p-3 border-bottom">
            <div
              class="mcq d-flex flex-row justify-content-between align-items-center"
            >
              <h4 class="category-title"><%= category[0].category_name %></h4>
              <span
                ><span id="que_no"><%= e.question_id %></span> of <%=
                exam[0].total_questions %></span
              >
            </div>
          </div>

          <form action="/answers" method="POST">
            <div class="d-flex">
              <div class="question w-100 bg-white">
                <div id="que" class="p-3">
                  <div
                    class="d-flex flex-row align-items-center question-title"
                  >
                    <h3 class="text-danger">
                      Q.
                      <h4 class="text-info mx-2"><%#= e.question_id %></h4>
                    </h3>
                    <h5 class="mt-1 ml-2"><%= e.question_text %></h5>
                  </div>
                  <div class="ans ml-2">
                    <label class="radio">
                      <input
                        type="radio"
                        name="q-<%= e.question_id %>"
                        value="<%= e.option_a%>"
                        onclick="getAnswers(this)"
                      />
                      <span><%= e.option_a%></span>
                    </label>
                  </div>
                  <div class="ans ml-2">
                    <label class="radio">
                      <input
                        type="radio"
                        name="q-<%= e.question_id %>"
                        value="<%= e.option_b%>"
                        onclick="getAnswers(this)"
                      />
                      <span><%= e.option_b%></span>
                    </label>
                  </div>
                  <div class="ans ml-2">
                    <label class="radio">
                      <input
                        type="radio"
                        name="q-<%= e.question_id %>"
                        value="<%= e.option_c%>"
                        onclick="getAnswers(this)"
                      />
                      <span><%= e.option_c%></span>
                    </label>
                  </div>
                  <div class="ans ml-2">
                    <label class="radio">
                      <input
                        type="radio"
                        name="q-<%= e.question_id %>"
                        value="<%= e.option_d%>"
                        onclick="getAnswers(this)"
                      />
                      <span><%= e.option_d%></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
            <div class="buttons p-3 bg-white" id="btns">
              <div
                class="row justify-content-around align-items-center"
                id="row"
              >
                <input
                  type="button"
                  value="PREV"
                  onclick="previous_btn('<%=e.question_id%>')"
                  class="border border-info rounded p-1 bg-white text-info font-weight-bold col-2"
                  id="prev"
                  <% if(e.question_id == 1) { %>
                    disabled 
                    <% } %>
                />

                <input
                  type="button"
                  value="SAVE"
                  onclick="next_btn('<%=e.question_id%>')"
                  class="btn btn-primary btn-success col-2 font-weight-bold"
                  id="next"
                  <% if(e.question_id == exam[0].total_questions) { %>
                    disabled 
                    <% } %>
                />                
              </div>
            </div>
          </form>
          <div class="d-flex justify-content-center">
            <input
              type="button"
              value="SUBMIT"
              class="btn btn-warning text-white col-2 font-weight-bold"
              id="submit"
            />
          </div>
        </div>

        <div
          class="page d-flex justify-content-center align-items-center pt-3"
          id="page"
        >
          <%for(var i=1;i<=category[0].no_of_question;i++){ %> <% if(i ===
          question_no){ %>
          <span
            id="i<%=i%>"
            class="selected m-1 btn pagination-number"
            onclick="fetcher('pagingGet/?question_no=<%=i%>&category_id=<%=category[0].category_id%>')"
            ><%=i%></span
          >
          <% continue; %> <% } %>
          <span
            id="i<%=i%>"
            class="m-1 btn pagination-number"
            onclick="fetcher('/pagingGet/?question_no=<%=i%>&category_id=<%=category[0].category_id%>')"
            ><%=i%></span
          >
          <% } %>
        </div>
      </div>
    </div>
  </body>
  <script>
    var total_questions = `<%=exam[0].total_questions%>`
    </script>
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
 
    <script src="/js/exam_script.js"></script>
</html>
